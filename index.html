<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Image Gallery</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;margin:20px;background:#0f172a;color:#e6eef8}
    h1{font-size:1.4rem;margin-bottom:12px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px}
    .card{position:relative;border-radius:12px;overflow:hidden;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));box-shadow:0 6px 18px rgba(2,6,23,0.6);display:flex;align-items:center;justify-content:center;min-height:120px}
    .card img{display:block;max-width:100%;max-height:160px;object-fit:cover;width:100%}
    .meta{position:absolute;left:8px;right:8px;bottom:8px;display:flex;justify-content:space-between;gap:6px}
    .name{font-size:0.75rem;padding:6px 8px;background:rgba(0,0,0,0.45);border-radius:8px;color:#fff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
    .dl{display:inline-flex;align-items:center;gap:6px;font-size:0.8rem;cursor:pointer;user-select:none;padding:6px 8px;background:rgba(255,255,255,0.04);border-radius:8px;text-decoration:none;color:#e6eef8}
    .dl svg{width:16px;height:16px}
    .status{margin-top:8px;font-size:0.9rem;color:#cbd5e1}
    .empty{padding:40px;text-align:center;color:#94a3b8}
  </style>
</head>
<body>
  <h1>Image Gallery</h1>
  <div id="status" class="status">Loading images...</div>
  <div id="gallery" class="grid" aria-live="polite"></div>
  <div id="empty" class="empty" style="display:none">No images found.</div>  <script>
    const gallery = document.getElementById('gallery');
    const status = document.getElementById('status');
    const empty = document.getElementById('empty');

    function isImage(name){
      return /\.(jpe?g|png|gif|webp|avif|svg)$/i.test(name);
    }

    function makeCard(name, url){
      const wrap=document.createElement('div');wrap.className='card';
      const img=document.createElement('img');img.src=url;img.alt=name;img.loading='lazy';
      img.addEventListener('click',()=>window.open(url,'_blank'));
      const meta=document.createElement('div');meta.className='meta';
      const nm=document.createElement('div');nm.className='name';nm.textContent=name;
      const dl=document.createElement('a');dl.className='dl';dl.href=url;dl.download=name;dl.title='Download '+name;
      dl.innerHTML=`<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3v10" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 9l4 4 4-4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M21 21H3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>`;
      meta.appendChild(nm);meta.appendChild(dl);wrap.appendChild(img);wrap.appendChild(meta);
      return wrap;
    }

    async function loadLocalImages(){
      try{
        const res=await fetch('./');
        const text=await res.text();
        const matches=[...text.matchAll(/href="([^"]+)"/g)].map(m=>m[1]);
        const images=matches.filter(isImage).map(u=>({name:u.split('/').pop(),url:u}));
        if(images.length===0){empty.style.display='';status.textContent='No images found.';return;}
        images.forEach(it=>gallery.appendChild(makeCard(it.name,it.url)));
        status.textContent=`Loaded ${images.length} image(s)`;
      }catch(e){
        status.textContent='Could not load images (directory listing not supported).';
        empty.style.display='';
      }
    }

    loadLocalImages();
  </script></body>
</html>
